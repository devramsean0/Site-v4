<div data-controller="websocket" data-websocket-channel-value="project" hidden></div>
<section id="projects" class="bg-s2 min-h-screen max-h-fit" data-controller="project"
    data-action="wsmessage@document->project#recieved" data-project-target="output">
    <h2 class="text-5xl text-white font-bold text-center py-5">Projects</h2>
    <div class="flex flex-col gap-2">
        {% for tech in technologies %}
        <div class="p-1 rounded-full border-white border-2 min-w-fit"
            style="background-color: white; width: {{100 / records.len() * tech.1 as usize}}%">
            <h2 class="pl-4 text-2xl">{{tech.0}}: {{tech.1}}</h2>
        </div>
        {% endfor %}
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 pt-4 gap-5 text-black">
        {% for project in records %}
        <div class="bg-gray-100 p-5 rounded-md">
            <div class="flex flex-col gap-3 justify-between h-full">
                <div>
                    <img src="/uploads/{{ project.preview_img }}" alt={project.data.name}
                        class="rounded-lg object-fill" />
                </div>
                <div class="grow">
                    <h2 class="text-3xl">{{ project.name }}</h2>
                    <p>{{ project.description }}</p>
                    <div class="grid grid-cols-2 gap-3">
                        {% for tech in project.technologies %}
                        <p class="p-2 text-black rounded-lg text-center border-2 border-black">
                            {{tech}}
                        </p>
                        {% endfor %}
                    </div>
                </div>
                <div class="flex justify-end gap-3">
                    {% if project.src.is_some() %}
                    <a href="{{project.src}}" target="_blank" rel="noopener noreferrer">
                        <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M27.951 14.157C28.365 13.44 29.283 13.194 30 13.608C30.717 14.022 30.963 14.94 30.549 15.657L20.049 33.843C19.635 34.56 18.717 34.806 18 34.392C17.283 33.978 17.037 33.06 17.451 32.343L27.951 14.157ZM34.473 31.335C33.942 30.699 34.029 29.7525 34.665 29.223L35.0325 28.9155C37.2495 27.0615 38.3565 26.1345 40.326 24C38.319 21.8235 37.248 20.9325 34.908 18.9795L34.665 18.777C34.029 18.2475 33.942 17.301 34.473 16.665C35.0025 16.029 35.886 16.0305 36.5865 16.473C39 18 40.5 19.5 42.8865 22.419C43.215 22.887 43.5 23.415 43.5 24C43.5 24.585 43.215 25.113 42.8865 25.5795C40.5 28.5 39 30 36.5865 31.5255L36.585 31.527C35.949 32.058 35.0025 31.971 34.473 31.335ZM13.335 29.223C13.971 29.7525 14.058 30.699 13.527 31.335C12.9975 31.971 12.051 32.058 11.415 31.527L11.4135 31.5255C9 30 7.5 28.5 5.1135 25.5795C4.785 25.113 4.5 24.585 4.5 24C4.5 23.415 4.785 22.887 5.1135 22.419C7.5 19.5 9 18 11.4135 16.473C12.114 16.0305 12.9975 16.029 13.527 16.665C14.058 17.301 13.971 18.2475 13.335 18.777L13.092 18.9795C10.752 20.9325 9.681 21.8235 7.674 24C9.6435 26.1345 10.7505 27.0615 12.9675 28.9155L13.335 29.223Z"
                                fill="black" />
                        </svg>
                    </a>
                    {% endif %}
                    {% if project.demo.is_some() %}
                    <a href="{{project.demo}}" target="_blank" rel="noopener noreferrer">
                        <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M25.0395 24.996C25.6035 24.4335 26.541 24.3765 27.105 24.939L27.2295 25.065C27.7665 25.6005 27.8085 26.46 27.2775 27.0015C27.2385 27.0405 27.201 27.0795 27.162 27.1185C25.8615 28.4175 24.6555 29.2755 23.391 29.601C23.274 29.631 23.154 29.6565 23.0355 29.6775C21.8325 29.8905 20.5665 29.6235 19.1115 28.8045C17.751 28.038 16.227 26.79 14.433 24.996C8.4945 19.0575 8.5245 16.0575 12.312 12.2685C16.101 8.481 19.101 8.451 25.0395 14.3895C25.698 15.048 26.2815 15.669 26.796 16.26C26.949 16.4355 26.7825 16.71 26.553 16.68C25.7145 16.569 24.927 16.6275 24.1815 16.821C23.733 16.938 23.2455 16.839 22.9185 16.512C19.9815 13.575 18.366 12.774 17.4735 12.6555C16.9245 12.582 16.1205 12.7035 14.433 14.3895C12.747 16.077 12.6255 16.881 12.699 17.43C12.8175 18.3225 13.6185 19.938 16.5555 22.875C17.2035 23.5245 17.7885 24.069 18.315 24.525C18.384 24.585 18.4515 24.6435 18.519 24.7005C19.7805 25.7685 20.694 26.31 21.3555 26.5605C21.6045 26.6535 21.8175 26.7075 21.999 26.7315C22.5495 26.805 23.3535 26.6835 25.0395 24.996ZM29.6445 23.3475C28.2765 22.1625 27.3 21.576 26.604 21.312C26.355 21.2175 26.142 21.165 25.959 21.141C25.4085 21.0675 24.606 21.189 22.9185 22.875C22.356 23.439 21.417 23.496 20.8545 22.932L20.73 22.8075C20.193 22.2705 20.1495 21.411 20.682 20.871C20.7195 20.832 20.7585 20.793 20.7975 20.754C22.0965 19.455 23.304 18.597 24.5685 18.2715C25.878 17.934 27.2475 18.1665 28.848 19.068C30.207 19.833 31.7325 21.0825 33.525 22.875C39.465 28.815 39.435 31.815 35.646 35.604C31.8585 39.3915 28.8585 39.4215 22.9185 33.4815C22.2615 32.8245 21.6765 32.2035 21.162 31.6125C21.009 31.437 21.1755 31.161 21.4065 31.1925C22.245 31.3035 23.031 31.245 23.778 31.0515C24.2265 30.9345 24.7125 31.0335 25.0395 31.3605C27.9765 34.2975 29.592 35.0985 30.4845 35.217C31.035 35.2905 31.839 35.169 33.525 33.4815C35.2125 31.7955 35.334 30.9915 35.2605 30.441C35.142 29.5485 34.341 27.933 31.404 24.996C30.7545 24.348 30.171 23.8035 29.6445 23.3475Z"
                                fill="black" />
                        </svg>

                    </a>
                    {% endif %}
                    {% if project.docs.is_some() %}
                    <a href="{{project.docs}}" target="_blank" rel="noopener noreferrer">
                        <svg width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M31.572 9.4365C29.754 9.075 27.384 9 24 9C20.616 9 18.246 9.075 16.428 9.4365C14.763 9.7605 14.0625 10.236 13.6485 10.7325C13.1685 11.3085 12.687 12.3735 12.3825 14.628C12.069 16.9245 12 19.911 12 24C12 28.0875 12.069 31.0755 12.3825 33.372C12.687 35.6265 13.1685 36.6915 13.6485 37.2675C14.0625 37.764 14.763 38.2395 16.428 38.5635C18.246 38.925 20.616 39 24 39C27.384 39 29.754 38.925 31.572 38.5635C33.237 38.2395 33.9375 37.764 34.3515 37.2675C34.8315 36.6915 35.313 35.6265 35.616 33.372C35.931 31.0755 36 28.0875 36 24C36 19.911 35.931 16.9245 35.616 14.628C35.313 12.3735 34.8315 11.3085 34.3515 10.7325C33.9375 10.236 33.237 9.7605 31.572 9.4365ZM39 24C39 7.5 37.7505 6 24 6C10.2495 6 9 7.5 9 24C9 40.5 10.2495 42 24 42C37.7505 42 39 40.5 39 24Z"
                                fill="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M14.25 16.5C14.25 16.1022 14.408 15.7206 14.6893 15.4393C14.9706 15.158 15.3522 15 15.75 15H32.25C32.6478 15 33.0294 15.158 33.3107 15.4393C33.592 15.7206 33.75 16.1022 33.75 16.5C33.75 16.8978 33.592 17.2794 33.3107 17.5607C33.0294 17.842 32.6478 18 32.25 18H15.75C15.3522 18 14.9706 17.842 14.6893 17.5607C14.408 17.2794 14.25 16.8978 14.25 16.5ZM14.25 24C14.25 23.6022 14.408 23.2206 14.6893 22.9393C14.9706 22.658 15.3522 22.5 15.75 22.5H32.25C32.6478 22.5 33.0294 22.658 33.3107 22.9393C33.592 23.2206 33.75 23.6022 33.75 24C33.75 24.3978 33.592 24.7794 33.3107 25.0607C33.0294 25.342 32.6478 25.5 32.25 25.5H15.75C15.3522 25.5 14.9706 25.342 14.6893 25.0607C14.408 24.7794 14.25 24.3978 14.25 24ZM14.25 31.5C14.25 31.1022 14.408 30.7206 14.6893 30.4393C14.9706 30.158 15.3522 30 15.75 30H27.75C28.1478 30 28.5294 30.158 28.8107 30.4393C29.092 30.7206 29.25 31.1022 29.25 31.5C29.25 31.8978 29.092 32.2794 28.8107 32.5607C28.5294 32.842 28.1478 33 27.75 33H15.75C15.3522 33 14.9706 32.842 14.6893 32.5607C14.408 32.2794 14.25 31.8978 14.25 31.5Z"
                                fill="black" />
                        </svg>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>